<p-dialog [(visible)]="display"
          [focusOnShow]="true"
          [draggable]="true"
          [maximizable]="true"
          [positionTop]="100"
          [modal]="true"
          appendTo="body"
          [style]="{width: '90%'}"
          [contentStyle]="{height: '80vh', 'overflow-y': 'auto', 'overflow-x': 'hidden'}"
          [responsive]="true">
  <p-header>
    <div class="col d-flex">
      <div class="flex-grow-1">
        <span class="dialog-header">
          {{'goodsReceiptPO.quantities.title ' | translate}}
        </span>
      </div>
      <div class="flex-shrink-1 d-flex">
        <button (click)="clearTable(tableQuantity)"
                class="btn btn-labeled btn-clear mr-2"
                data-qe-id="button-clear">
          <span class="btn-label">
            <img src="/assets/img/filter.svg" width="16">
          </span>
          <span class="button-label">
            {{'general.button.clear' | translate}}
          </span>
        </button>
        <button class="btn btn-labeled btn-import mr-2">
          <span class="btn-label">
            <img src="/assets/img/import.svg" width="24" alt="">
          </span>
          <span class="button-label">
            {{'general.button.import' | translate}}
          </span>
        </button>
        <button class="btn btn-labeled btn-export mr-2">
          <span class="btn-label">
            <img src="/assets/img/export.svg" width="24">
          </span>
          <span class="button-label">
            {{'general.button.export' | translate}}
          </span>
        </button>
        <button (click)="deleteSelected()" class="btn btn-labeled btn-delete">
          <span class="btn-label">
            <i class="material-icons">delete</i>
          </span>
          <span class="button-label">
              {{'general.button.delete' | translate}}
          </span>
        </button>
      </div>
    </div>
  </p-header>

  <div class="container-fluid">
    <div class="row mb-2">
      <div class="col-6 offset-6 d-flex align-items-center justify-content-end">
        <label for="dialog-input-start-scan-quantities-no" class="ml-2">
          {{'goodsReceiptPO.totalItems' | translate}}:
        </label>
        <div class="ml-2">
          <input [value]="quantity?.quantity"
                 readonly
                 class="form-control form-control-sm flex-grow-1"
                 data-qe-id="dialog-input-start-scan-quantities-no"
                 id="dialog-input-start-scan-quantities-no"
                 pKeyFilter="int"
                 type="text">
        </div>
      </div>
    </div>

    <div class="row mb-2">
      <div class="col d-flex align-items-center justify-content-between">
        <label for="dialog-quantity-item-code" class="ml-2">
          {{'goodsReceiptPO.itemCode' | translate}}:
        </label>
        <div class="ml-2">
          <input readonly
                 [value]="quantity?.itemCode"
                 class="form-control form-control-sm flex-grow-1"
                 data-qe-id="dialog-quantity-item-code"
                 id="dialog-quantity-item-code"
                 pKeyFilter="int"
                 type="text">
        </div>
      </div>
      <div class="col d-flex align-items-center justify-content-between">
        <label for="dialog-quantity-item-name" class="ml-2">
          {{'goodsReceiptPO.itemName' | translate}}:
        </label>
        <div class="ml-2">
          <input readonly
                 [value]="quantity?.itemName"
                 class="form-control form-control-sm flex-grow-1"
                 data-qe-id="dialog-quantity-item-name"
                 id="dialog-quantity-item-name"
                 pKeyFilter="int"
                 type="text">
        </div>
      </div>
      <div class="col d-flex align-items-center justify-content-between">
        <label for="dialog-quantity-item-unit-price" class="ml-2">
          {{'goodsReceiptPO.unitPrice' | translate}}:
        </label>
        <div class="ml-2">
          <input readonly
                 [value]="quantity?.unitPrice"
                 class="form-control form-control-sm flex-grow-1"
                 data-qe-id="dialog-quantity-item-unit-price"
                 id="dialog-quantity-item-unit-price"
                 pKeyFilter="int"
                 type="text">
        </div>
      </div>
      <div class="col d-flex align-items-center justify-content-between">
        <label for="dialog-quantity-item-actual-receive" class="ml-2">
          {{'goodsReceiptPO.actualReceive' | translate}}:
        </label>
        <div class="ml-2">
          <input readonly
                 [value]="quantity?.actualReceive"
                 class="form-control form-control-sm flex-grow-1"
                 data-qe-id="dialog-quantity-item-actual-receive"
                 id="dialog-quantity-item-actual-receive"
                 pKeyFilter="int"
                 type="text">
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <p-table #tableQuantity
                 [resizableColumns]="true"
                 dataKey="id"
                 [scrollable]="true"
                 scrollHeight="360px"
                 [value]="quantity?.goodsReceiptPOQuantityDetails">
          <ng-template pTemplate="colgroup">
            <colgroup>
              <col>
              <col>
              <col>
            </colgroup>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th data-qe-id="table-thead-quantities-bin-location-code" pResizableColumn>
                {{'goodsReceiptPO.quantities.binLocationCode' | translate}}
              </th>
              <th data-qe-id="table-thead-quantities-bin-location-code" pResizableColumn>
                {{'goodsReceiptPO.quantities.binLocationQuantity' | translate}}
              </th>
              <th data-qe-id="table-thead-quantities-bin-location-code" pResizableColumn [ngStyle]="{width: '5em'}">
                {{'goodsReceiptPO.quantities.actions' | translate}}
              </th>
            </tr>
            <tr>
              <th class="th-filter"></th>
              <th class="th-filter"></th>
              <th class="th-filter" [ngStyle]="{width: '5em'}"></th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-rowIndex="rowIndex">
            <tr>
              <td>
                {{rowData.binLocationCode}}
              </td>
              <td>
                {{rowData.quantity}}
              </td>
              <td [ngStyle]="{width: '5em'}">
                <a role="button" (click)="deleteBinLocation(rowIndex)">
                  <i class="material-icons">delete</i>
                </a>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td [attr.colspan]="3">
                <a role="button" class="btn btn-link" (click)="addBinLocation()">
                  + {{'general.button.addRow' | translate}}
                </a>
              </td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>

  <p-footer>
    <div class="row">
      <div class="col-12 page-actions d-flex justify-content-end">
        <button (click)="updateQuantity()" class="btn btn-labeled btn-save-dialog">
          <span class="btn-label"><i class="material-icons">save</i></span>
          <span class="button-label">
              {{'general.button.save' | translate}}
            </span>
        </button>
        <button (click)="display = false" class="btn btn-labeled btn-cancel">
          <span class="btn-label"><i class="material-icons"> highlight_off</i></span>
          <span class="button-label">
              {{'general.button.cancel' | translate}}
            </span>
        </button>
      </div>
    </div>
  </p-footer>
</p-dialog>
