<p-dialog [(visible)]="display" [contentStyle]="{'overflow':'visible'}" [modal]="true" [responsive]="true"
  [style]="{width: '80%'}" appendTo="body">
  <p-header>
    <div class="row">
      <div class="col-sm-3">
        <span class="dialog-header">{{'goodsReceiptDetail.amount.title ' | translate}}: {{extendTitle}}</span>
      </div>
    </div>
  </p-header>
  <div class="dialog-body">
    <div class="row">
      <div class="col-sm-12 mt-2">
        <div class="d-flex align-items-center justify-content-end">
          <span class="ml-2">{{'goodsReceiptDetail.amount.unitOfMeasure' | translate}}</span>
          <div class="ml-2">
            <input [value]="goodsReceiptContent.unitOfMeasureName" class="form-control disabled"
              data-qe-id="dialog-input-start-scan-batches-no" type="text">
          </div>
        </div>
      </div>
      <div class="col-sm-12 mt-2">
        <div class="d-flex align-items-center justify-content-end">
          <span class="ml-2">{{'goodsReceiptDetail.amount.quantity' | translate}}</span>
          <div class="ml-2">
            <input [value]="goodsReceiptContent.quantity" class="form-control disabled"
              data-qe-id="dialog-input-start-scan-batches-no" type="text">
          </div>
        </div>
      </div>
      <div class="col-sm-12 mt-2">
        <div class="d-flex align-items-center justify-content-end">
          <span class="ml-2">{{'goodsReceiptDetail.amount.actualReceive' | translate}}</span>
          <div class="ml-2">
            <input [ngModel]="goodsReceiptContent.actualReceive" class="form-control"
              data-qe-id="dialog-input-start-scan-batches-no" type="text"
              (ngModelChange)="goodsReceiptContent.actualReceive = generalService.toNumber($event)">
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-3" *ngIf="enableBinLocation">
      <div class="col-sm-12">
        <p-table [resizableColumns]="true" [scrollable]="true" [value]="goodsReceiptContent.goodsReceiptQuantities"
          resizableColumns scrollHeight="350px">
          <ng-template pTemplate="colgroup">
            <colgroup>
              <col>
              <col>
              <col width="100px;">
            </colgroup>
          </ng-template>
          <ng-template pTemplate="header">
            <tr>
              <th data-qe-id="table-thead-amount-location-code" pResizableColumn>
                {{'goodsReceiptDetail.amount.locationCode' | translate}}
              </th>
              <th data-qe-id="table-thead-amount-quantity-saved" pResizableColumn>
                {{'goodsReceiptDetail.amount.quantitySaved' | translate}}
              </th>
              <th>
                {{'general.action' | translate}}
              </th>
            </tr>
          </ng-template>
          <ng-template let-index="rowIndex" let-quantityDetail pTemplate="body">
            <tr>
              <td>
                <jaja-select-list [getList]="quantityDialogRepository.getBinLocationList" appendTo="body"
                  [display]="quantityDetail.binLocationCode" (change)="quantityDetail.binLocationId = $event" key="id"
                  [searchEntity]="binLocationSearchEntity" searchField="code" searchType="startsWith">
                  <ng-template #label #option let-code="code">
                    {{code}}
                  </ng-template>
                </jaja-select-list>
              </td>
              <td>
                <div class="validation-div">
                  <input
                    (ngModelChange)="quantityDetail.quantity = generalService.toNumber($event); recalculateQuantityDetail()"
                    [attr.placeholder]="null" [ngClass]="{'error-border-color': quantityDetail.errors}"
                    [ngModel]="quantityDetail.quantity" class="form-control" type="text" />
                  <div *ngIf="quantityDetail.errors" class="invalid-validation">
                    <span>{{quantityDetail.errors.message}}</span>
                  </div>
                </div>
              </td>
              <td class="text-center">
                <mat-icon (click)="deleteQuantityDetail(index)" class="text-danger">delete</mat-icon>
              </td>
            </tr>
          </ng-template>
          <ng-template pTemplate="footer">
            <tr>
              <td>
                <a href="javascript:;" (click)="addQuantityDetail()">+
                  {{'general.button.addRow' | translate}}</a>
              </td>
              <td colspan="2"></td>
            </tr>
          </ng-template>
        </p-table>
      </div>
    </div>
  </div>
  <p-footer>
    <div class="row">
      <div class="col-sm-12">
        <div class="page-actions d-flex justify-content-end">
          <button (click)="update()" class="btn btn-labeled btn-save-dialog">
            <span class="btn-label"><i class="material-icons">save</i></span>
            <span class="button-label">
              {{'general.button.save' | translate}}
            </span></button>
          <button (click)="cancel()" class="btn btn-labeled btn-cancel">
            <span class="btn-label"><i class="material-icons"> highlight_off</i></span>
            <span class="button-label">
              {{'general.button.cancel' | translate}}
            </span></button>
        </div>
      </div>
    </div>
  </p-footer>
</p-dialog>