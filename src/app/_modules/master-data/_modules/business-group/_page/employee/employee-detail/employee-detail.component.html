<div class="page employee-detail">
  <div class="page-header">
        <span class="page-title">
            {{pageTitle | translate}}
        </span>
    <div class="page-actions">
      <button class="btn btn-save" (click)="save()" appNoDblClick data-qe-id="button-save">
        {{ 'general.button.save' | translate}}</button>
      <button class="btn btn-cancel" (click)="cancel()"
              data-qe-id="button-cancel">{{ 'general.button.cancel' | translate}}</button>
    </div>
  </div>
  <hr>
  <div class="page-body">
    <accordion>
      <accordion-group [isOpen]="true" [formGroup]="employeeForm">
        <button (click)="isOpenTab1 = !isOpenTab1" class="btn btn-link btn-block clearfix" accordion-heading>
          <div class="pull-left float-left">{{'employee.detail.tab.title1' | translate }}</div>
          <span class="float-right pull-right" accordion-heading>
                        <i class="fas " [ngClass]="!isOpenTab1 ? 'fa-caret-down' : 'fa-caret-up'"></i>
                    </span>
        </button>
        <div class="row">
          <div class="col-sm-4">
            <div class="form-group">
              <label for="employeeCode">{{ 'employee.detail.content.code' | translate}}<span
                class="text-danger ml-2">*</span></label>
              <div class="div-form">
                <input type="text" class="form-control" formControlName="code" data-qe-id="form-code"
                       id="employeeCode"/>
                <app-error data-qe-id="form-error-code"
                           *ngIf="(employeeForm.controls.code?.errors && employeeForm.controls.code?.touched) || !!employeeForm.controls.errors?.get('code')?.value"
                           [formGroup]="employeeForm" [property]="'code'" [placement]="'top'"
                           class="error-form">
                </app-error>
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group">
              <label for="employeeBirthday">{{ 'employee.detail.content.dob' | translate}}</label>
              <app-date-picker [control]="employeeForm.get('dob')">
              </app-date-picker>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group">
              <label for="employeeSalary">{{ 'employee.detail.content.salary' | translate}}</label>
              <app-input-number [control]="employeeForm.get('salary')" inputId="employeeSalary">
              </app-input-number>
            </div>
          </div>

        </div>
        <div class="row">
          <div class="col-sm-4">
            <div class="form-group">
              <label for="bankid"> {{ 'employee.detail.content.name' | translate}}<span
                class="text-danger ml-2">*</span></label>
              <div class="div-form">
                <input type="text" class="form-control" formControlName="name" id="employeeName">
                <app-error data-qe-id="form-error-name"
                           *ngIf="(employeeForm.controls.name?.errors && employeeForm.controls.name?.touched) || !!employeeForm.controls.errors.get('name')?.value"
                           [formGroup]="employeeForm" [property]="'name'" [placement]="'top'"
                           class="error-form">
                </app-error>
              </div>
            </div>
          </div>

          <div class="col-sm-4">
            <div class="form-group">
              <label
                for="employeeIdentityNumber">{{ 'employee.detail.content.identityNumber' | translate}}</label>
              <input type="text" class="form-control" formControlName="identityNumber"
                     id="employeeIdentityNumber">
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group">
              <label
                for="employeeSalaryRatio">{{ 'employee.detail.content.salaryRatio' | translate}}</label>
              <input type="text" class="form-control" pKeyFilter="pnum" formControlName="salaryRatio">
            </div>
          </div>

        </div>
        <div class="row">
          <div class="col-sm-4">
            <div class="form-group">
              <label for="bankid">{{ 'employee.detail.content.gender' | translate}}</label>
              <div class="ratio-button" style="display: flex">
                <p-radioButton name="groupname" [value]="true" formControlName="gender"
                               [label]="'employee.content.table.gender.men' | translate"></p-radioButton>
                <p-radioButton name="groupname" [value]="false" formControlName="gender" class="ml-1"
                               [label]="'employee.content.table.gender.women' | translate"></p-radioButton>
              </div>
            </div>
          </div>

          <div class="col-sm-4">
            <div class="form-group">
              <label
                for="employeeIssuePlace">{{ 'employee.detail.content.issuePlace' | translate}}</label>
              <input type="text" class="form-control" formControlName="issuePlace"
                     id="employeeIssuePlace">
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group">
              <label for="employeeInsuranceSalary">
                {{ 'employee.content.table.insuranceSalary' | translate}}
              </label>
              <app-input-number [control]="employeeForm.get('insuranceSalary')"
                                inputId="employeeInsuranceSalary"></app-input-number>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <div class="form-group">
              <label for="bankid">{{ 'employee.detail.content.jobTitle' | translate}}</label>
              <app-single-select [initialValue]="employeeForm.controls.jobTitleName.value"
                                 [list]="jobTitleExceptIds" [selectedList]="jobTitleIds" [key]="'name'"
                                 (search)="searchJobTitle($event)"
                                 (selectionChange)="employeeForm.controls.jobTitleId.setValue($event[0])"
                                 (listOpen)="openJobTitleList(employeeForm.controls.jobTitleId.value)">
              </app-single-select>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group">
              <label for="employeeIssueDate">{{ 'employee.detail.content.issueDate' | translate}}</label>
              <app-date-picker [control]="employeeForm.get('issueDate')"></app-date-picker>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group">
              <label
                for="employeeNumberDependentPerson">{{ 'employee.detail.content.numberDependentPerson' | translate}}</label>
              <input type="text" class="form-control" pKeyFilter="int"
                     formControlName="numberDependentPerson"/>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <div class="form-group">
              <label for="bankid">{{ 'employee.detail.content.jobLevel' | translate}}</label>
              <app-single-select [initialValue]="employeeForm.controls.jobLevel.value"
                                 [list]="jobLevelExceptIds" [selectedList]="jobLevelIds" [key]="'level'"
                                 (search)="searchJobLevel($event)"
                                 (selectionChange)="employeeForm.controls.jobLevelId.setValue($event[0])"
                                 (listOpen)="openJobLevelList(employeeForm.controls.jobLevelId.value)">
              </app-single-select>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group">
              <label for="employeeTaxCode">{{ 'employee.detail.content.taxCode' | translate}}</label>
              <input type="text" class="form-control" formControlName="taxCode" id="employeeTaxCode"/>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="form-group">
              <label for="employeeStatus">{{ 'employee.detail.content.status' | translate}}<span
                class="text-danger ml-2">*</span></label>
              <div class="div-form">
                <app-simple-select [key]="'display'" [list]="statusList"
                                   [initialValue]="employeeForm.controls.statusDisplay.value"
                                   (selectionChange)="employeeForm.controls.statusId.setValue($event)"
                                   (listOpen)="openStatusList()" data-qe-id="form-characteristic" class="w-100">
                </app-simple-select>
                <app-error data-qe-id="form-error-status"
                           *ngIf="(employeeForm.controls.statusId?.errors && employeeForm.controls.statusId?.dirty) || !!employeeForm.controls.errors?.get('statusId')?.value"
                           [formGroup]="employeeForm" [property]="'statusId'" [placement]="'top'"
                           class="error-form">
                </app-error>
              </div>
            </div>
          </div>
        </div>
      </accordion-group>

    </accordion>
  </div>
  <div class="page-footer">
    <div>
      <button class="btn btn-delete" mwlConfirmationPopover [popoverTitle]="popoverTitle"
              [popoverMessage]="popoverMessage" placement="bottom" (confirm)="deactivate()"
              (cancel)="cancelClicked = true" data-qe-id="button-delete"
              *ngIf="employeeForm.controls.id.value !== null && employeeForm.controls.id.value !== undefined">
        {{ 'general.button.delete' | translate}}</button>
    </div>
    <div class="page-actions">
      <button class="btn btn-save" (click)="save()" appNoDblClick data-qe-id="button-save">
        {{ 'general.button.save' | translate}}</button>
      <button class="btn btn-cancel" (click)="cancel()"
              data-qe-id="button-cancel">{{ 'general.button.cancel' | translate}}</button>
    </div>
  </div>


</div>
