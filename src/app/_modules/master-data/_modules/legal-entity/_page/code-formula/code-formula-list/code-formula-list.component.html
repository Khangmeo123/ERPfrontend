<div class="page code-formula">
  <div class="page-header">
    <div class="page-title">
      {{'codeFormula.title' | translate}}
    </div>
    <div class="page-actions">

    </div>
  </div>
  <div class="page-body">
    <div class="page-section code-formula">

      <div class="legal-entity-select-box">
        <span>
          {{'general.legal_entity.name' | translate}}:
        </span>
        <app-single-select id="legal-entity-select-box"
                           key="name"
                           [initialValue]="legalEntity?.name"
                           [valueSelector]="legalEntitySelector"
                           [list]="legalEntityList"
                           [selectedList]="selectedLegalEntityList"
                           (listOpen)="onOpenLegalEntityList()"
                           (search)="onSearchLegalEntity($event)"
                           (selectionChange)="onSelectLegalEntity($event)"
        ></app-single-select>
      </div>

      <div class="actions">
        <button class="btn btn-add" (click)="addSplitRule()" [disabled]="!legalEntity">
          {{'general.button.add' | translate}}
        </button>
        <button class="btn btn-import">
          {{'general.button.import' | translate}}
        </button>
        <button class="btn btn-export">
          {{'general.button.export' | translate}}
        </button>
      </div>
    </div>
    <div class="page-section">
      <p-table [resizableColumns]="true" [value]="codeFormulaList">
        <ng-template pTemplate="header">
          <tr>
            <th>
              {{'codeFormula.code' | translate}}
            </th>
            <th>
              {{'codeFormula.name' | translate}}
            </th>
            <th class="number-cell">
              {{'codeFormula.length' | translate}}
            </th>
            <th class="number-cell">
              {{'codeFormula.identifierStringStart' | translate}}
            </th>
            <th class="number-cell">
              {{'codeFormula.identifierStringEnd' | translate}}
            </th>
            <th>
              {{'codeFormula.identifierStringValues' | translate}}
            </th>
            <th class="code-formula-actions">
            </th>
          </tr>
          <tr>
            <th class="th-filter">
              <app-advanced-filters defaultType="startsWith" [filter]="codeFormulaSearchEntity.code"
                                    (changeFilter)="getList()"></app-advanced-filters>
            </th>
            <th class="th-filter">
              <app-advanced-filters [filter]="codeFormulaSearchEntity.name"
                                    (changeFilter)="getList()"></app-advanced-filters>
            </th>
            <th class="th-filter number-cell">

            </th>
            <th class="th-filter number-cell">

            </th>
            <th class="th-filter number-cell">

            </th>
            <th class="th-filter">
            </th>
            <th class="th-filter code-formula-actions"></th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-rowData let-index="index">
          <tr>
            <td>
              {{rowData.code}}
            </td>
            <td>
              {{rowData.name}}
            </td>
            <td class="number-cell">
              {{rowData.length}}
            </td>
            <td class="number-cell">
              {{rowData.identifierStringStart}}
            </td>
            <td class="number-cell">
              {{rowData.identifierStringEnd}}
            </td>
            <td>
              {{rowData.identifierStringValues}}
            </td>
            <td>
              <a role="button" (click)="edit(rowData)">
                <mat-icon>edit</mat-icon>
              </a>
            </td>
          </tr>
        </ng-template>
      </p-table>
      <div class="pagination">
        <app-pagination [pagination]="pagination" (paginationOut)="paginationOut($event)"></app-pagination>
      </div>
    </div>
  </div>
</div>
